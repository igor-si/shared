{"body": [{"indent": 0, "text": ["POP Wrangle"], "type": "title", "extent": [0, 16], "level": 0}, {"indent": 0, "type": "summary", "extent": [105, 152], "text": ["Runs a VEX snippet to modify particles."]}, {"body": [{"indent": 0, "type": "para", "extent": [167, 281], "text": ["This is a very powerful, low-level node that lets experts who are familiar with VEX tweak particles using code."]}, {"indent": 0, "type": "para", "extent": [281, 399], "text": ["This node corresponds to the ", {"text": ["POP VOP DOP"], "fullpath": "/nodes/dop/popvop", "scheme": "Node", "type": "link", "value": "/nodes/dop/popvop"}, ", but uses a textual VEX snippet instead of a VOP network."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [408, 535], "text": ["This node requires that you understand the ", {"text": ["vex language"], "fullpath": "/vex/index", "scheme": null, "type": "link", "value": "/vex/"}, ". It is very easy to write incorrect code using this node."]}], "indent": 0, "role": "item", "type": "warning", "extent": [399, 408]}], "container": true, "role": "item_group", "type": "warning_group"}, {"indent": 0, "type": "para", "extent": [535, 761], "text": ["This node runs the snippet on the detail or every point in the input geometry.\nThe snippet can edit the input geometry by changing attributes.\nIt can access information from other geometry using attributes and VEX functions."]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [761, 832], "text": ["Press ", {"keys": ["MMB"], "text": null, "type": "keys"}, " on the node to see any error output from the snippet."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [832, 1045], "text": ["You can use the VEX function ", {"text": ["ch"], "type": "code"}, " to evaluate parameters.\n  The path is relative to this node (", {"text": ["ch(\"parm\")"], "type": "code"}, " will evaluate the parameter ", {"text": ["parm"], "type": "code"}, " on this node).\n  This evaluation will be done at the current time."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [1045, 1294], "text": ["Unlike the ", {"text": ["Attrib Create SOP"], "fullpath": "/nodes/sop/attribcreate", "scheme": "Node", "type": "link", "value": "/nodes/sop/attribcreate"}, ", this does not use local variables.\n  Further, all backtick expressions and ", {"text": ["$F"], "type": "code"}, " variables will be evaluated at frame 1,\n  not the current time.\n  Use ", {"text": ["@Frame"], "type": "code"}, ", ", {"text": ["@Time"], "type": "code"}, ", or ", {"text": ["@TimeInc"], "type": "code"}, " instead."]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Overview"], "extent": [152, 167], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [1308, 1360], "text": ["This node runs the snippet in the ", {"text": ["CVEX context"], "type": "strong"}, "."]}, {"body": [{"type": "para", "indent": 0, "extent": [29, 294], "text": ["The ", {"text": ["VEX snippet"], "type": "ui"}, " parameter lets you enter a snippet of ", {"text": ["VEX code"], "fullpath": "/vex/index", "scheme": null, "type": "link", "value": "/vex/"}, " to run on the input geometry.\nSee ", {"text": ["VEX snippets"], "fullpath": "/vex/snippets", "scheme": null, "type": "link", "value": "/vex/snippets"}, " for information on special syntax in the snippet parameter.\nSee ", {"text": ["the VEX chapter"], "fullpath": "/vex/index", "scheme": null, "type": "link", "value": "/vex/"}, " for information on the VEX language."]}], "container": true, "level": 3, "text": ["Syntax"], "extent": [16, 29], "indent": 0, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Context"], "extent": [1294, 1308], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [61, 265], "text": ["Turns this node on and off. The node is only active if this\n        value is greater than 0. This is useful to control the effect of\n        this node with an ", {"text": ["expression"], "fullpath": "/expressions/index", "scheme": null, "type": "link", "value": "/expressions/"}, "."]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [279, 410], "text": ["This is activation of the node as a whole. You can\u2019t use this parameter to deactivate the node for certain particles."]}], "indent": 8, "role": "item", "type": "note", "extent": [265, 279]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 4, "text": ["Activation"], "role": "item", "extent": [45, 61], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [421, 648], "text": ["Only affect a group of points (created with, for example, a\n        ", {"text": ["Group POP"], "fullpath": "/nodes/dop/popgroup", "scheme": "Node", "type": "link", "value": "/nodes/dop/popgroup"}, " or ", {"text": ["Collision\n        Detection POP"], "fullpath": "/nodes/dop/popcollisiondetect", "scheme": "Node", "type": "link", "value": "/nodes/dop/popcollisiondetect"}, ") out of all the points in \n        the current stream."]}], "indent": 4, "text": ["Group"], "role": "item", "extent": [410, 421], "type": "parameters_item"}], "container": true, "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [1536, 1675], "text": ["Only create attributes if their names match this pattern.\n        The default pattern allows any attribute to be created."]}, {"indent": 8, "type": "para", "extent": [1675, 1775], "text": ["You can restrict the created attributes by replacing the ", {"text": ["*"], "type": "code"}, " with a list of allowed names."]}, {"indent": 8, "type": "para", "extent": [1775, 1859], "text": ["Bound attributes, such as ", {"text": ["vtxnum"], "type": "code"}, ", cannot be created and will be ignored."]}], "indent": 4, "text": ["Attributes to Create"], "role": "item", "extent": [1510, 1536], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1883, 2103], "text": ["Automatic binding with the ", {"text": ["@"], "type": "code"}, " syntax can be convenient, but if your\n        system becomes more complex there is the risk that a typo in an ", {"text": ["@"], "type": "code"}, " binding\n        will silently just bind a non-existent attribute."]}, {"indent": 8, "type": "para", "extent": [2103, 2208], "text": ["This option forces all ", {"text": ["@"], "type": "code"}, " bindings to be explicitly declared as\n        prototypes before use."]}], "indent": 4, "text": ["Enforce Prototypes"], "role": "item", "extent": [1859, 1883], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [29, 119], "text": ["Determines if the current solver timestep will be used to apply\n    this node.  "]}, {"type": "para", "indent": 4, "extent": [119, 338], "text": ["If set, the current timestep size will be multiplied\n    by the scale and used for the time increment for this operation.\n    Otherwise, the time scale will specify an absolute fictitious time\n    to integrate by."]}, {"type": "para", "indent": 4, "extent": [338, 487], "text": ["By disabling the link between the actual real time and the\n    microsolver time, you can perform operations in a separate,\n    fictitious, time."]}], "indent": 0, "text": ["Use Timestep"], "role": "item", "extent": [15, 29], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [499, 723], "text": ["The timestep used for this microsolver will be scaled by this\n    amount.  This allows one to achieve non-realistic effects, such as\n    parts of the simulation operating at different speeds than other\n    parts.  "]}, {"type": "para", "indent": 4, "extent": [723, 825], "text": ["Similarly, it is useful if a solver needs to be evaluated\n    independently of the main timestep."]}], "indent": 0, "text": ["Time Scale"], "role": "item", "extent": [487, 499], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Code"], "extent": [1452, 1463], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [2279, 2339], "text": ["The list of the geometry on the object to process."]}], "indent": 4, "text": ["Geometry"], "role": "item", "extent": [2265, 2279], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2365, 2635], "text": ["VEX functions like ", {"text": ["ch()"], "type": "code"}, " usually evaluate with respect to this node. Providing a path here can override where the path search starts from.  This is useful for embedding in a digital asset where you would like the top level digital asset to be the search root."]}], "indent": 4, "text": ["Evaluation Node Path"], "role": "item", "extent": [2339, 2365], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2658, 2997], "text": ["When a VEX parameter is exported, the bound attribute will be created if it doesn\u2019t exist.  This pattern can be used to override the export option on the VEX shader to avoid writing to or creating certain attributes.  The pattern matches the VEX parameter, not the bound attribute.  The attribute will still be bound for reading."]}], "indent": 4, "text": ["Export Parameters"], "role": "item", "extent": [2635, 2658], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3019, 3122], "text": ["Will use the name of the attribute to determine which attribute binds with which parameter.  "]}, {"indent": 8, "type": "para", "extent": [3122, 3327], "text": ["Integer attributes will bind to integer parameters.  Float attributes will bind to float, vector, point, matrix, or matrix4 depending on their tuple size.  String attributes will bind to strings."]}], "indent": 4, "text": ["Autobind by Name"], "role": "item", "extent": [2997, 3019], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3362, 3424], "text": ["Manually specifies the bindings of each attribute.  "]}], "indent": 4, "text": ["Attribute Name, VEX Parameter"], "role": "item", "extent": [3327, 3362], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3455, 3627], "text": ["Optionally binds Scalar, Vector, Matrix, or Index fields from this object to the CVEX function.  They will be sampled at the current ", {"text": ["P"], "type": "code"}, " location of each element."]}, {"indent": 8, "type": "para", "extent": [3627, 3715], "text": ["You can then access these with the ", {"text": ["@"], "type": "code"}, " syntax referring to the given Parameter."]}], "indent": 4, "text": ["Field Name, VEX Parameter"], "role": "item", "extent": [3424, 3455], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3744, 3831], "text": ["Automatically bind any groups to the integer parameter prefixed with ", {"text": ["group_"], "type": "code"}, "."]}], "indent": 4, "text": ["Autobind Groups by Name"], "role": "item", "extent": [3715, 3744], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3862, 3918], "text": ["Manually specifies the bindings of each group."]}], "indent": 4, "text": ["Group Name, VEX Parameter"], "role": "item", "extent": [3831, 3862], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3951, 4224], "text": ["If points are being run over, and the ", {"text": ["P"], "type": "code"}, " attribute is written to,\n        but the ", {"text": ["N"], "type": "code"}, " attribute is not written to, any incoming normals will\n        become out of date.  When this option is set, vertex and point\n        normals will be updated when this occurs."]}], "indent": 4, "text": ["Update Normals If Displaced"], "role": "item", "extent": [3918, 3951], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Data Bindings"], "extent": [2245, 2265], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [4260, 4334], "text": ["These control the four virtual inputs accessible inside of VOPs."]}, {"indent": 8, "type": "para", "extent": [4334, 4473], "text": ["They can be accessed with the OpInput1-4 wires from the VOP, or with the ", {"text": ["@OpInput1-4"], "type": "code"}, " string parameters when using VEXpressions."]}, {"indent": 8, "type": "para", "extent": [4473, 4573], "text": ["They can also be accessed numerically as 0-3 with VEX functions that take an input number."]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [4587, 4635], "text": ["No geometry is wired to this input."]}], "indent": 8, "type": "dt", "extent": [4573, 4587], "text": ["None"]}, {"body": [{"indent": 12, "type": "para", "extent": [4648, 4753], "text": ["The SOP geometry will be cooked prior to running the VEX and the result wired to this input."]}], "indent": 8, "type": "dt", "extent": [4635, 4648], "text": ["SOP"]}, {"body": [{"indent": 12, "type": "para", "extent": [4771, 5021], "text": ["Data in the current simulation to reference.  Specified as\n            an object/data, for example, ", {"text": ["pyro1/vel"], "type": "code"}, " to refer to the velocity\n            field of the ", {"text": ["pyro1"], "type": "code"}, " object (which will show up as three volume\n            primitives)."]}], "indent": 8, "type": "dt", "extent": [4753, 4771], "text": ["DOP Data"]}, {"body": [{"indent": 12, "type": "para", "extent": [5037, 5230], "text": ["Referring to the geometry currently being processed is special as you have to ensure a copy is made so the VEX functions can refer to its original form.  This handles that for you."]}], "indent": 8, "type": "dt", "extent": [5021, 5037], "text": ["Myself"]}, {"body": [{"indent": 12, "type": "para", "extent": [5260, 5338], "text": ["These refer to the SOPs wired into the parent DOP Network itself."]}], "indent": 8, "type": "dt", "extent": [5230, 5260], "text": ["Nth Context Geometry"]}, {"body": [{"indent": 12, "type": "para", "extent": [5378, 5565], "text": ["Refers the currently processed geometry.  Does not make a copy\n            so it is up to the user to ensure no reads are made from\n            any attributes that are bound."]}], "indent": 8, "type": "dt", "extent": [5338, 5378], "text": ["Myself (No Reads from Outputs)"]}], "container": true, "type": "dt_group"}], "indent": 4, "text": ["Input 1, 2, 3, 4"], "role": "item", "extent": [4237, 4260], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5579, 5613], "text": ["Path to a SOP to wire in."]}], "indent": 4, "text": ["SOP Path"], "role": "item", "extent": [5565, 5579], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5627, 5704], "text": ["Object/data path a piece of DOP data in THIS simulation to wire in."]}], "indent": 4, "text": ["DOP Data"], "role": "item", "extent": [5613, 5627], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Inputs"], "extent": [4224, 4237], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"type": "para", "indent": 8, "extent": [694, 879], "text": ["The name of the simulation data to apply the POP node to.\n        This commonly is Geometry, but POP Networks can be designed\n        to apply to different geometry if desired."]}], "indent": 4, "text": ["Geometry"], "role": "item", "extent": [680, 694], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 8, "extent": [905, 1245], "text": ["For nodes with local expressions, this controls where ", {"text": ["ch()"], "type": "code"}, "\n        style expressions in VEX are evaluated with respect to.  By\n        making this ", {"text": ["."], "type": "code"}, ", you can ensure relative references work.\n        It is important to promote this if you are embedding a node inside\n        an HDA you are also exporting the local expressions."]}], "indent": 4, "text": ["Evaluation Node Path"], "role": "item", "extent": [879, 905], "type": "parameters_item"}], "type": "parameters_item_group", "container": true}], "indent": 0, "level": 2, "text": ["Bindings"], "extent": [5704, 5719], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1397, 1409], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [5778, 5800], "text": [{"text": "", "fullpath": "/nodes/dop/popvop", "scheme": "Node", "type": "link", "value": "/nodes/dop/popvop"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [5769, 5778], "container": true, "type": "related_section", "id": "related"}], "title": ["POP Wrangle"], "summary": ["Runs a VEX snippet to modify particles."], "attrs": {"version": null, "tags": "volumes", "namespace": null, "internal": "popwrangle", "context": "dop", "type": "node", "icon": "SOP/pointwrangle"}, "included": ["/nodes/dop/standard_gas_timestep", "/nodes/dop/standard_pop_parms", "/nodes/sop/wrangle_syntax"], "type": "root"}