{"body": [{"indent": 0, "text": ["Point Relax"], "type": "title", "extent": [0, 16], "level": 0}, {"indent": 0, "type": "summary", "extent": [116, 206], "text": ["Moves points with overlapping radii away from each other, optionally on a surface."]}, {"body": [{"indent": 0, "type": "para", "extent": [221, 575], "text": ["This node looks for any points that, if they were spheres with the specified\nradii, would be overlapping, and attempts to move them to nearby locations\nthat reduce the overlap.  This helps avoid having points that are too close\nto each other.  This process is repeated until there are no overlapping\npoints, or the ", {"text": ["Max Iterations"], "type": "ui"}, " limit is reached."]}, {"indent": 0, "type": "para", "extent": [575, 1054], "text": ["If a second input is attached, the points are confined to that surface when\nrelaxing, i.e. they will each be relaxed in the plane perpendicular to the\nsurface normal, and will be projected back onto the surface after each step\nof relaxing.  If no second input is attached, by default, the \"N\" attribute\non the points will be used as if it were the surface normal for each point,\nif present.  To relax points in 3D space, instead of in a 2D plane,\nturn on ", {"text": ["Relax in 3D Space"], "type": "ui"}, "."]}, {"indent": 0, "type": "para", "extent": [1054, 1437], "text": ["Points are relaxed similarly in the ", {"text": ["Scatter"], "fullpath": "/nodes/sop/scatter", "scheme": "Node", "type": "link", "value": "/nodes/sop/scatter"}, " node.  Point\nRelax allows for more control over the point radii, and allows for points\ngenerated by different approaches to be relaxed.  The relaxation algorithm\nis a generalization of Lloyd\u2019s algorithm, (Voronoi iteration),\nwith support added for finite and non-equal point radii, as well as\nunbounded 2D or 3D space."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1443, 1642], "text": ["This is intended for use with disconnected points, not for points in meshes.\n    It will usually not produce desired results when relaxing points in meshes,\n    because it will ignore the mesh."]}], "indent": 0, "role": "item", "type": "note", "extent": [1437, 1443]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "level": 2, "text": ["Overview"], "extent": [206, 221], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1688, 1968], "text": ["The points that will be moved away from the ", {"text": ["Influencing Points"], "type": "ui"}, " if any\n    have radii overlapping the radii of the ", {"text": ["Influencing Points"], "type": "ui"}, ".\n    If these points being relaxed should be moved away from each other, they\n    should also be in the ", {"text": ["Influencing Points"], "type": "ui"}, " group."]}], "indent": 0, "text": ["Points to Relax"], "role": "item", "attrs": {"id": "group"}, "extent": [1654, 1672], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2013, 2129], "text": ["The points that will affect any ", {"text": ["Points to Relax"], "type": "ui"}, " that have radii\n    overlapping the radii of these points."]}], "indent": 0, "text": ["Influencing Points"], "role": "item", "attrs": {"id": "influencegroup"}, "extent": [1968, 1988], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2172, 2291], "text": ["The primitives from the second input that form the surface that\n    the ", {"text": ["Points to Relax"], "type": "ui"}, " should be relaxed on."]}, {"indent": 4, "type": "para", "extent": [2291, 2536], "text": ["If the points are initially on a particular set of primitives,\n    they may occasionally \"hop\" to nearby primitives, even ones that may\n    not be part of the same surface, so specifying this group can help\n    reduce that type of problem."]}], "indent": 0, "text": ["Surface Primitives"], "role": "item", "attrs": {"id": "surfacegroup"}, "extent": [2129, 2149], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2576, 2702], "text": ["This is the maximum number of times that the ", {"text": ["Points to Relax"], "type": "ui"}, "\n    will be moved away from the ", {"text": ["Influencing Points"], "type": "ui"}, "."]}], "indent": 0, "text": ["Max Iterations"], "role": "item", "attrs": {"id": "maxiterations"}, "extent": [2536, 2552], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2739, 2994], "text": ["When ", {"text": ["Point Radius Attribute"], "type": "ui"}, " is enabled, this scales those radii;\n    otherwise, this is used as the radii of the points.  Any\n    ", {"text": ["Points to Relax"], "type": "ui"}, " whose radii are within the radii of\n    ", {"text": ["Influencing Points"], "type": "ui"}, " will be moved away, if possible."]}], "indent": 0, "text": ["Point Radius Scale"], "role": "item", "attrs": {"id": "radius"}, "extent": [2702, 2722], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3041, 3290], "text": ["When enabled, this point attribute, multiplied by ", {"text": ["Point Radius Scale"], "type": "ui"}, "\n    will be used for the radii of the points.  Any\n    ", {"text": ["Points to Relax"], "type": "ui"}, " whose radii are within the radii of\n    ", {"text": ["Influencing Points"], "type": "ui"}, " will be moved away, if possible."]}], "indent": 0, "text": ["Point Radius Attribute"], "role": "item", "attrs": {"id": "radiusattrib"}, "extent": [2994, 3018], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3329, 3668], "text": ["When enabled, points will be relaxed in 3D space, instead of relaxing\n    points in 2D planes and optionally projecting onto a surface in the\n    second input.  This can be significantly slower than relaxing in 2D,\n    if there are a large number of ", {"text": ["Points to Relax"], "type": "ui"}, " whose radii are\n    within the radii of ", {"text": ["Influencing Points"], "type": "ui"}, "."]}], "indent": 0, "text": ["Relax in 3D Space"], "role": "item", "attrs": {"id": "relaxin3d"}, "extent": [3290, 3309], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3711, 4128], "text": ["When enabled, points will be relaxed in the 2D plane perpendicular to\n    the vectors in the \"N\" attribute.  If the second input is connected,\n    the \"N\" attribute from the surface will be used, or computed if not\n    present; otherwise, the \"N\" attribute from the ", {"text": ["Points to Relax"], "type": "ui"}, "\n    will be used, or computed if not present.  When disabled,\n    ", {"text": ["Normal Direction"], "type": "ui"}, " will be used instead of the attribute."]}], "indent": 0, "text": ["Use Normal Attribute"], "role": "item", "attrs": {"id": "usenormals"}, "extent": [3668, 3690], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4147, 4281], "text": ["When ", {"text": ["Use Normal Attribute"], "type": "ui"}, " is disabled, ", {"text": ["Points to Relax"], "type": "ui"}, " will\n    be relaxed in the 2D plane perpendicular to this vector."]}], "indent": 0, "text": ["Normal Direction"], "role": "item", "extent": [4128, 4147], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4330, 4828], "text": ["By default, the maximum distance that a point will be moved in a single\n    iteration is approximately its radius, which keeps the relaxation\n    stable when there are only small variations in radii.  However, this\n    can cause problems when there are large variations in radii, e.g. when\n    some radii are zero and others overlap with them, because the\n    points may never \"escape\".  This attribute specifies a separate\n    maximum distance that each point can move in a single iteration."]}], "indent": 0, "text": ["Max Step Size Attribute"], "role": "item", "attrs": {"id": "maxstepattrib"}, "extent": [4281, 4306], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4872, 5111], "text": ["When enabled, an attribute will be output indicating the number of the\n    surface primitive on which each point stopped.\n    Enable this and ", {"text": ["Prim UVW Attribute"], "type": "ui"}, " for use with\n    ", {"text": ["Attribute Interpolate"], "fullpath": "/nodes/sop/attribinterpolate", "scheme": "Node", "type": "link", "value": "/nodes/sop/attribinterpolate"}, "."]}], "indent": 0, "text": ["Prim Num Attribute"], "role": "item", "attrs": {"id": "primnumattrib"}, "extent": [4828, 4848], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5155, 5420], "text": ["When enabled, an attribute will be output indicating the coordinates of\n    each point in the parameter space of the primitive on which it stopped.\n    Enable this and ", {"text": ["Prim Num Attribute"], "type": "ui"}, " for use with\n    ", {"text": ["Attribute Interpolate"], "fullpath": "/nodes/sop/attribinterpolate", "scheme": "Node", "type": "link", "value": "/nodes/sop/attribinterpolate"}, "."]}], "indent": 0, "text": ["Prim UVW Attribute"], "role": "item", "attrs": {"id": "primuvwattrib"}, "extent": [5111, 5131], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1642, 1654], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [5429, 5461], "text": [{"text": "", "fullpath": "/nodes/sop/attribinterpolate", "scheme": "Node", "type": "link", "value": "/nodes/sop/attribinterpolate"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [5461, 5482], "text": [{"text": "", "fullpath": "/nodes/sop/scatter", "scheme": "Node", "type": "link", "value": "/nodes/sop/scatter"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [5482, 5500], "text": [{"text": "", "fullpath": "/nodes/sop/copy", "scheme": "Node", "type": "link", "value": "/nodes/sop/copy"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [5420, 5429], "container": true, "type": "related_section", "id": "related"}], "summary": ["Moves points with overlapping radii away from each other, optionally on a surface."], "type": "root", "attrs": {"version": null, "tags": "points, relax", "namespace": null, "bestbet": "relax", "internal": "relax", "context": "sop", "type": "node", "icon": "SOP/relax"}, "title": ["Point Relax"]}