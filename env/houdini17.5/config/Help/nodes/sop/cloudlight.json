{"body": [{"indent": 0, "text": ["Cloud Light"], "type": "title", "extent": [0, 16], "level": 0}, {"indent": 0, "type": "summary", "extent": [119, 163], "text": ["Fills a volume with a diffuse light."]}, {"indent": 0, "type": "para", "extent": [163, 398], "text": ["The Cloud Light SOP is a tool to compute a light field you can add\nto a volume render.  It can be used to create an approximation of multiple\nscattering in a cloud without the expense (or rendering noise) that \nsuch solutions entail."]}, {"indent": 0, "type": "para", "extent": [398, 596], "text": ["It is not a realistic operation, but it provides controls to allow an artist\nto quickly converge to a realistic solution.  It may be best to think of\nit as a way to paint light fields efficiently."]}, {"indent": 0, "type": "para", "extent": [596, 659], "text": ["There are three stages to the computation of the light field."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [690, 901], "text": ["The input volume needs to be turned into a speed field.  Each voxel will\n    have its speed limit.  Speed can be thought of a sort of inverse density -\n    higher values will result in lower arrival times."]}], "indent": 0, "type": "dt", "extent": [659, 690], "text": ["Computation of a speed field"]}, {"body": [{"indent": 4, "type": "para", "extent": [932, 1202], "text": ["The  ", {"text": ["Volume Arrival Time SOP"], "fullpath": "/nodes/sop/volumearrivaltime", "scheme": "Node", "type": "link", "value": "/nodes/sop/volumearrivaltime"}, " is used to compute how long it takes to reach any particular voxel from one of the seed points.  Voxels that are only reachable through low speeds will thus have higher values as they take longer to get to."]}], "indent": 0, "type": "dt", "extent": [901, 932], "text": ["Computation of arrival times"]}, {"body": [{"indent": 4, "type": "para", "extent": [1231, 1392], "text": ["Finally, the arrival time field is converted into a light field.  This\n    usually implies an inversion - high arrival times correspond to dark\n    lights."]}, {"indent": 4, "type": "para", "extent": [1392, 1520], "text": ["The expensive stage is the arrival time computation, so it is often fast to\n    tweak this stage for a fixed arrival time."]}, {"indent": 4, "type": "para", "extent": [1520, 1673], "text": ["A good place to start is to adjust the color ramp\u2019s black and white points\n    to figure out visually where the contrast range is in your scenario."]}], "indent": 0, "type": "dt", "extent": [1202, 1231], "text": ["Lighting the arrival times"]}], "container": true, "type": "dt_group"}, {"indent": 0, "type": "para", "extent": [1673, 1762], "text": ["It is quite reasonable to layer multiple light fields together by adding them\ntogether."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [22, 137], "text": ["This node currently only works with standard Houdini volumes.\n    It does not work with ", {"text": ["VDBs"], "fullpath": "/model/volumes", "scheme": null, "type": "link", "value": "/model/volumes"}, "."]}], "indent": 0, "role": "item", "type": "note", "extent": [16, 22]}], "container": true, "role": "item_group", "type": "note_group"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [1803, 1950], "text": ["Which volumes to compute a light field for.  These are processed\n        independently and will each get their own light field at the end."]}], "indent": 4, "text": ["Group"], "role": "item", "extent": [1792, 1803], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1972, 2275], "text": ["Multiscattered light is a low-frequency effect.  Thus, you do not need\n        a as a high resolution for the light field as you would use for the\n        cloud itself.  Scaling down the resolution by 0.5 will take an eighth\n        the memory and an eighth the time, so is usually a good idea."]}], "indent": 4, "text": ["Resolution Scale"], "role": "item", "extent": [1950, 1972], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2302, 2482], "text": ["Outputs the speed function with no further processing.  This is very\n        useful to figure out how the propagation parameters work as you can see\n        them directly."]}], "indent": 4, "text": ["Output Speed Function"], "role": "item", "extent": [2275, 2302], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2508, 2587], "text": ["Disables the lighting tab and just outputs the arrival times directly."]}], "indent": 4, "text": ["Output Arrival Times"], "role": "item", "extent": [2482, 2508], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2606, 2840], "text": ["The incoming density fields are passed through.  A ", {"text": ["Volume Visualization\n        SOP"], "fullpath": "/nodes/sop/volumevisualization", "scheme": "Node", "type": "link", "value": "/nodes/sop/volumevisualization"}, " will also be used to set the light field to light volume, letting\n        you see the result in the viewport."]}, {"body": [{"body": [{"indent": 16, "type": "para", "extent": [2854, 3102], "text": ["There is no particular reason that the density field you use to compute a light field has to be used for rendering the light field. You may find it profitable to alter the incoming density field for light propagation reasons only."]}], "indent": 8, "role": "item", "type": "note", "extent": [2840, 2854]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 4, "text": ["Keep Original"], "role": "item", "extent": [2587, 2606], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 12, "type": "para", "extent": [3159, 3339], "text": ["Disables all processing of the incoming density field, using it\n            directly as a speed function for the ", {"text": ["Volume Arrival Time SOP"], "fullpath": "/nodes/sop/volumearrivaltime", "scheme": "Node", "type": "link", "value": "/nodes/sop/volumearrivaltime"}, "."]}, {"indent": 12, "type": "para", "extent": [3339, 3596], "text": ["You may want to use this if you had used an earlier Volume Cloud\n            Light SOP with the ", {"text": ["Output Speed Function"], "type": "ui"}, " enabled, had modified the\n            speed field a bit, and now want to directly compute the lighting on\n            it."]}], "indent": 8, "text": ["Treat Input as Raw Speed"], "role": "item", "extent": [3124, 3159], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [3617, 3726], "text": ["This density value will map to the upper end of the density\n            contrast range."]}], "indent": 8, "text": ["Max Density"], "role": "item", "extent": [3596, 3617], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [3748, 3864], "text": ["A bias function moving the speed function either to the highest\n            density or lowest density."]}], "indent": 8, "text": ["Forward Bias"], "role": "item", "extent": [3726, 3748], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [3890, 4047], "text": ["Controls the range of the density to speed conversion.  The lowest\n            value will go to ", {"text": ["1 - constrast/2"], "type": "code"}, ", the highest to ", {"text": ["contrast/2"], "type": "code"}, "."]}], "indent": 8, "text": ["Density Contrast"], "role": "item", "extent": [3864, 3890], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [4073, 4227], "text": ["Complements the speed field: sets it to one minus its computed\n            value.  Thus the slow areas become fast and the fast become slow."]}], "indent": 8, "text": ["Complement Speed"], "role": "item", "extent": [4047, 4073], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [4246, 4379], "text": ["Defines a lobed volume which will revert to zero-density behavior\n            rather than max-density behavior."]}], "indent": 8, "text": ["Use Phase"], "role": "item", "extent": [4227, 4246], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [4400, 4759], "text": ["The lobe is defined from the average of the seed points to the\n            cloud center.  It may be a lobe that starts at the cloud center and\n            leaves away from the seeds.  Or it can start from the seeds and\n            head to the center.  And finally, it can start from the seed and\n            reach its maximum at the cloud center."]}], "indent": 8, "text": ["Phase Model"], "role": "item", "extent": [4379, 4400], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [4781, 5060], "text": ["The barycenter of the cloud is computed to find where the lobe\n            should point.  Alternatively, you can use this to override where\n            the center is.  This is useful if an animated cloud might cause\n            unexpected changes in lobe direction."]}], "indent": 8, "text": ["Cloud Center"], "role": "item", "extent": [4759, 4781], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [5091, 5200], "text": ["How accurate the resulting arrival times have to be before the\n            iteration is stopped."]}], "indent": 8, "text": ["Convergence Tolerance"], "role": "item", "extent": [5060, 5091], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [5228, 5381], "text": ["Even if a solution within the tolerance is not found, the process\n            will still be stopped if this number of passes has been done."]}], "indent": 8, "text": ["Maximum Iterations"], "role": "item", "extent": [5200, 5228], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Propagation"], "extent": [3102, 3124], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 12, "type": "para", "extent": [5422, 5495], "text": ["The generated light fields will be multiplied by this color."]}], "indent": 8, "text": ["Light Color"], "role": "item", "extent": [5400, 5422], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [5520, 5591], "text": ["The light fields will be multiplied by this scalar value."]}], "indent": 8, "text": ["Light Intensity"], "role": "item", "extent": [5495, 5520], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [5620, 5885], "text": ["When converting the arrival time to a light intensity, the arrival\n            time can be sent through an exponential curve.  This simulates the\n            fall off of light through an extinguishing medium, but is often too\n            harsh a curve."]}], "indent": 8, "text": ["Exponential Falloff"], "role": "item", "extent": [5591, 5620], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [5908, 5981], "text": ["How quickly light is extinguished by the arrival time field."]}], "indent": 8, "text": ["Density Scale"], "role": "item", "extent": [5885, 5908], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [6001, 6231], "text": ["The complemented arrival time field is sent through this color ramp\n            to get the color.  Adjusting the white and black point here is\n            usually the first step in finding a good lighting for a cloud."]}], "indent": 8, "text": ["Color Ramp"], "role": "item", "extent": [5981, 6001], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [6245, 6358], "text": ["Controls a gain factor, accentuating or hiding the variation in the\n            cloud light values."]}], "indent": 8, "text": ["Gain"], "role": "item", "extent": [6231, 6245], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Lighting"], "extent": [5381, 5400], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1780, 1792], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [6367, 6402], "text": [{"text": "", "fullpath": "/nodes/sop/volumearrivaltime", "scheme": "Node", "type": "link", "value": "/nodes/sop/volumearrivaltime"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [6402, 6440], "text": [{"text": "", "fullpath": "/nodes/sop/volumevisualization", "scheme": "Node", "type": "link", "value": "/nodes/sop/volumevisualization"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [6358, 6367], "container": true, "type": "related_section", "id": "related"}], "title": ["Cloud Light"], "summary": ["Fills a volume with a diffuse light."], "attrs": {"version": null, "tags": "baking, volumes, clouds", "namespace": null, "internal": "cloudlight", "context": "sop", "type": "node", "icon": "SOP/cloudlight"}, "included": ["/nodes/sop/no_vdb"], "type": "root"}